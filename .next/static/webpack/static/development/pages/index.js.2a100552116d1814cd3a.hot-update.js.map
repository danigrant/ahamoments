{"version":3,"file":"static/webpack/static/development/pages/index.js.2a100552116d1814cd3a.hot-update.js","sources":["webpack:///./components/ExplanationCard.js","webpack:///./node_modules/dom-confetti/lib/main.js","webpack:///./node_modules/react-dom-confetti/lib/confetti.js"],"sourcesContent":["import React from 'react'\nimport Card from './Card'\nimport CardSection from './CardSection'\nimport MultiAvatarUnit from './MultiAvatarUnit'\nimport AhaButton from './AhaButton'\nimport DontGetItButton from './DontGetItButton'\nimport ReactionButtonBar from './ReactionButtonBar'\nimport Link from 'next/link'\nimport EmbeddedPhoto from './explanationMediaComponents/EmbeddedPhoto'\nimport EmbeddedAudio from './explanationMediaComponents/EmbeddedAudio'\nimport EmbeddedVideo from './explanationMediaComponents/EmbeddedVideo'\nimport EmbeddedTweet from './explanationMediaComponents/EmbeddedTweet'\nimport EmbeddedYouTube from './explanationMediaComponents/EmbeddedYouTube'\nimport EmbeddedPodcast from './explanationMediaComponents/EmbeddedPodcast'\nimport EmbeddedLink from './explanationMediaComponents/EmbeddedLink'\nimport { conceptToDisplayName, explanationTypeToDisplayType } from '../utils/utils'\nimport { addAhaToDB, addDontGetItToDB, addReactionGotItToDB, addReactionLaughingToDB, addReactionShockedToDB } from '../utils/firebase'\nimport Confetti from 'react-dom-confetti';\n\nclass ExplanationCard extends React.Component {\n  constructor(props) {\n    super(props)\n    this.handleAha = this.handleAha.bind(this)\n    this.handleDontGetIt = this.handleDontGetIt.bind(this)\n    this.handleReactionGotIt = this.handleReactionGotIt.bind(this)\n    this.handleReactionLaughing = this.handleReactionLaughing.bind(this)\n    this.handleReactionShocked = this.handleReactionShocked.bind(this)\n  }\n  async handleAha() {\n    await addAhaToDB(this.props.explanation.explanationID, this.props.loggedInUser.userID, this.props.explanation.authorUserID)\n    this.props.handleGoToNextCard()\n  }\n  async handleDontGetIt() {\n    await addDontGetItToDB(this.props.explanation.explanationID, this.props.loggedInUser.userID, this.props.explanation.authorUserID)\n    this.props.handleGoToNextCard()\n  }\n  async handleReactionGotIt() {\n    await addReactionGotItToDB(this.props.explanation.explanationID, this.props.loggedInUser.userID, this.props.explanation.authorUserID)\n  }\n  async handleReactionLaughing() {\n    await addReactionLaughingToDB(this.props.explanation.explanationID, this.props.loggedInUser.userID, this.props.explanation.authorUserID)\n  }\n  async handleReactionShocked() {\n    await addReactionShockedToDB(this.props.explanation.explanationID, this.props.loggedInUser.userID, this.props.explanation.authorUserID)\n  }\n  render() {\n    const config = {\n      angle: 90,\n      spread: 45,\n      startVelocity: 45,\n      elementCount: 50,\n      dragFriction: 0.1,\n      duration: 3000,\n      stagger: 0,\n      width: \"10px\",\n      height: \"10px\",\n      colors: [\"#a864fd\", \"#29cdff\", \"#78ff44\", \"#ff718d\", \"#fdff6a\"]\n    };\n    return (\n      <div className=\"explanation-card-wrapper\">\n        <Card>\n          <CardSection>\n            <img className=\"avatar avatar-sml\" src={this.props.explanation.authorAvatarUrl} />\n            <p className=\"font-color-light-grey inline-block\">\n              <span className=\"link\"><Link href={`/explainer/${this.props.explanation.authorUserID}`}><a>{this.props.explanation.authorDisplayName}</a></Link> </span>\n              explains\n              <span className=\"link\"> <Link href={`/concept/${this.props.explanation.concept}`}><a>{conceptToDisplayName(this.props.explanation.concept)}</a></Link> </span>\n              through\n              <span className=\"link\"> {explanationTypeToDisplayType(this.props.explanation.explanation.type)}</span>\n            </p>\n          </CardSection>\n          <CardSection>\n            <p className=\"margin-bottom-sml\">{this.props.explanation.explanation.introText}</p>\n            {\n              this.props.explanation.explanation.mediaConsumptionGuidance &&\n              <p className=\"margin-bottom-sml\">{this.props.explanation.explanation.mediaConsumptionGuidance}</p>\n            }\n            {\n              this.props.explanation.explanation.type == \"tweet\" &&\n              <EmbeddedTweet tweet={this.props.explanation.explanation.mediaLink}/>\n            }\n            {\n              this.props.explanation.explanation.type == \"audio\" &&\n              <EmbeddedAudio audio={this.props.explanation.explanation.mediaLink}/>\n            }\n            {\n              this.props.explanation.explanation.type == \"link\" &&\n              <EmbeddedLink link={this.props.explanation.explanation.mediaLink}/>\n            }\n            {\n              this.props.explanation.explanation.type == \"photo\" &&\n              <EmbeddedPhoto photo={this.props.explanation.explanation.mediaLink}/>\n            }\n            {\n              this.props.explanation.explanation.type == \"podcast\" &&\n              <EmbeddedPodcast podcast={this.props.explanation.explanation.mediaLink}/>\n            }\n            {\n              this.props.explanation.explanation.type == \"video\" &&\n              <EmbeddedVideo video={this.props.explanation.explanation.mediaLink}/>\n            }\n            {\n              this.props.explanation.explanation.type == \"youtube\" &&\n              <EmbeddedYouTube youtube={this.props.explanation.explanation.mediaLink}/>\n            }\n          </CardSection>\n          <CardSection>\n            <AhaButton handleAha={this.handleAha} />\n            <DontGetItButton handleDontGetIt={this.handleDontGetIt} />\n            <ReactionButtonBar className=\"float-right\" handleReactionGotIt={this.handleReactionGotIt} handleReactionLaughing={this.handleReactionLaughing} handleReactionShocked={this.handleReactionShocked} />\n          </CardSection>\n        </Card>\n      </div>\n    )\n  }\n}\n\n\n\nexport default ExplanationCard\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.confetti = confetti;\nvar defaultColors = [\"#a864fd\", \"#29cdff\", \"#78ff44\", \"#ff718d\", \"#fdff6a\"];\n\nfunction createElements(root, elementCount, colors, width, height) {\n  return Array.from({ length: elementCount }).map(function (_, index) {\n    var element = document.createElement(\"div\");\n    var color = colors[index % colors.length];\n    element.style[\"background-color\"] = color; // eslint-disable-line space-infix-ops\n    element.style.width = width;\n    element.style.height = height;\n    element.style.position = \"absolute\";\n    element.style.willChange = \"transform, opacity\";\n    element.style.visibility = \"hidden\";\n    root.appendChild(element);\n    return element;\n  });\n}\n\nfunction randomPhysics(angle, spread, startVelocity, random) {\n  var radAngle = angle * (Math.PI / 180);\n  var radSpread = spread * (Math.PI / 180);\n  return {\n    x: 0,\n    y: 0,\n    wobble: random() * 10,\n    wobbleSpeed: 0.1 + random() * 0.1,\n    velocity: startVelocity * 0.5 + random() * startVelocity,\n    angle2D: -radAngle + (0.5 * radSpread - random() * radSpread),\n    angle3D: -(Math.PI / 4) + random() * (Math.PI / 2),\n    tiltAngle: random() * Math.PI,\n    tiltAngleSpeed: 0.1 + random() * 0.3\n  };\n}\n\nfunction updateFetti(fetti, progress, dragFriction, decay) {\n  /* eslint-disable no-param-reassign */\n  fetti.physics.x += Math.cos(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.y += Math.sin(fetti.physics.angle2D) * fetti.physics.velocity;\n  fetti.physics.z += Math.sin(fetti.physics.angle3D) * fetti.physics.velocity;\n  fetti.physics.wobble += fetti.physics.wobbleSpeed;\n  // Backward compatibility\n  if (decay) {\n    fetti.physics.velocity *= decay;\n  } else {\n    fetti.physics.velocity -= fetti.physics.velocity * dragFriction;\n  }\n  fetti.physics.y += 3;\n  fetti.physics.tiltAngle += fetti.physics.tiltAngleSpeed;\n\n  var _fetti$physics = fetti.physics,\n      x = _fetti$physics.x,\n      y = _fetti$physics.y,\n      tiltAngle = _fetti$physics.tiltAngle,\n      wobble = _fetti$physics.wobble;\n\n  var wobbleX = x + 10 * Math.cos(wobble);\n  var wobbleY = y + 10 * Math.sin(wobble);\n  var transform = \"translate3d(\" + wobbleX + \"px, \" + wobbleY + \"px, 0) rotate3d(1, 1, 1, \" + tiltAngle + \"rad)\";\n\n  fetti.element.style.visibility = \"visible\";\n  fetti.element.style.transform = transform;\n  fetti.element.style.opacity = 1 - progress;\n\n  /* eslint-enable */\n}\n\nfunction animate(root, fettis, dragFriction, decay, duration, stagger) {\n  var startTime = void 0;\n\n  return new Promise(function (resolve) {\n    function update(time) {\n      if (!startTime) startTime = time;\n      var elapsed = time - startTime;\n      var progress = startTime === time ? 0 : (time - startTime) / duration;\n      fettis.slice(0, Math.ceil(elapsed / stagger)).forEach(function (fetti) {\n        updateFetti(fetti, progress, dragFriction, decay);\n      });\n\n      if (time - startTime < duration) {\n        requestAnimationFrame(update);\n      } else {\n        fettis.forEach(function (fetti) {\n          if (fetti.element.parentNode === root) {\n            return root.removeChild(fetti.element);\n          }\n        });\n        resolve();\n      }\n    }\n\n    requestAnimationFrame(update);\n  });\n}\n\nvar defaults = {\n  angle: 90,\n  spread: 45,\n  startVelocity: 45,\n  elementCount: 50,\n  width: \"10px\",\n  height: \"10px\",\n  colors: defaultColors,\n  duration: 3000,\n  stagger: 0,\n  dragFriction: 0.1,\n  random: Math.random\n};\n\nfunction backwardPatch(config) {\n  if (!config.stagger && config.delay) {\n    config.stagger = config.delay;\n  }\n  return config;\n}\n\nfunction confetti(root) {\n  var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _Object$assign = Object.assign({}, defaults, backwardPatch(config)),\n      elementCount = _Object$assign.elementCount,\n      colors = _Object$assign.colors,\n      width = _Object$assign.width,\n      height = _Object$assign.height,\n      angle = _Object$assign.angle,\n      spread = _Object$assign.spread,\n      startVelocity = _Object$assign.startVelocity,\n      decay = _Object$assign.decay,\n      dragFriction = _Object$assign.dragFriction,\n      duration = _Object$assign.duration,\n      stagger = _Object$assign.stagger,\n      random = _Object$assign.random;\n\n  var elements = createElements(root, elementCount, colors, width, height);\n  var fettis = elements.map(function (element) {\n    return {\n      element: element,\n      physics: randomPhysics(angle, spread, startVelocity, random)\n    };\n  });\n\n  return animate(root, fettis, dragFriction, decay, duration, stagger);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _domConfetti = require(\"dom-confetti\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar style = {\n  position: \"relative\"\n};\n\nvar Confetti = function (_Component) {\n  _inherits(Confetti, _Component);\n\n  function Confetti(props) {\n    _classCallCheck(this, Confetti);\n\n    var _this = _possibleConstructorReturn(this, (Confetti.__proto__ || Object.getPrototypeOf(Confetti)).call(this, props));\n\n    _this.setRef = _this.setRef.bind(_this);\n    return _this;\n  }\n\n  _createClass(Confetti, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.active && !this.props.active) {\n        (0, _domConfetti.confetti)(this.container, nextProps.config);\n      }\n    }\n  }, {\n    key: \"setRef\",\n    value: function setRef(ref) {\n      this.container = ref;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _react2.default.createElement(\"div\", { className: this.props.className, style: style, ref: this.setRef });\n    }\n  }]);\n\n  return Confetti;\n}(_react.Component);\n\nexports.default = Confetti;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AANA;AAOA;AACA;;;;;;;;;;;;AACA;AACA;;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;AA/FA;AACA;AAmGA;;;;;;;;;;;;ACvHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}