{"version":3,"file":"static/webpack/static/development/pages/_app.js.c384ea642c072271886f.hot-update.js","sources":["webpack:///./pages/_app.js"],"sourcesContent":["import React from 'react'\nimport App from 'next/app'\nimport Head from 'next/head'\nimport '../utils/firebase' // this instantiates firebase\nimport { firebase, getLoggedInUser, saveUserToDB } from '../utils/firebase'\n\nclass AhaMoments extends App {\n  constructor(props) {\n    super(props)\n    this.state = {\n      loggedIn: false,\n      loggedInUser: {}\n    }\n    this.handleUserLoggedIn = this.handleUserLoggedIn.bind(this)\n  }\n  async componentDidMount() {\n    if (this.state.loggedIn) {\n      this.setState({\n        loggedInUser: await getLoggedInUser()\n      })\n    }\n\n    let thisRef = this;\n    firebase.auth().onAuthStateChanged(function(user) {\n      if (user) {\n        // User is signed in.\n        saveUserToDB(user.displayName, user.email, user.photoURL, user.uid)\n        // update state to add current user\n        thisRef.handleUserLoggedIn()\n      } else {\n        // user logged out\n        thisRef.setState({\n          loggedIn: false,\n          loggedInUser: {}\n        })\n      }\n    })\n  }\n  async handleUserLoggedIn() {\n    this.setState({\n      loggedIn: true,\n      loggedInUser: await getLoggedInUser()\n    })\n    await saveUserToDB(user.displayName, user.email, user.photoURL, user.uid)\n  }\n  render() {\n    const { Component, pageProps } = this.props\n    return (\n      <div>\n        <Head>\n          <link href=\"https://fonts.googleapis.com/css?family=Nunito:400,700,800,900&display=swap\" rel=\"stylesheet\" />\n          <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />\n          <link rel=\"stylesheet\" href=\"/css/utils.css\" />\n          <link rel=\"stylesheet\" href=\"/css/styles.css\" />\n        </Head>\n        <Component loggedIn={this.state.loggedIn} loggedInUser={this.state.loggedInUser} {...pageProps} />\n      </div>\n    )\n  }\n}\n\nAhaMoments.getInitialProps = async (appContext) => {\n  // calls page's `getInitialProps` and fills `appProps.pageProps`\n  const appProps = await App.getInitialProps(appContext);\n\n  return { ...appProps }\n}\n\nexport default AhaMoments\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AANA;AAOA;AACA;;;;;;;;;;;;AACA;;;;;AACA;;AACA;AACA;;;;AADA;;;AADA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;AAEA;;AAEA;AACA;;;;AAFA;AACA;;;AAFA;AACA;;AAGA;AACA;;;;;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;AApDA;AACA;AAsDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAEA;AAFA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAMA;;;;A","sourceRoot":""}